<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conta</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <link rel="stylesheet" href="/stylesheets/aluno.css">
</head>
<body>

<div class="container py-4 mb-5">

    <h3 class="mb-4">
        <i class="bi bi-person-circle"></i> Minha Conta
    </h3>

    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">Dados da Conta</h5>

            <p><strong>Nome:</strong> <%= usuario.nome %></p>
            <p><strong>Usuário:</strong> <%= usuario.user_name %></p>
            <p><strong>E-mail:</strong> <%= usuario.email %></p>
            <p><strong>Tipo de conta:</strong> Aluno</p>
            <p><strong>Conta criada em:</strong> <%= new Date(usuario.criado_em).toLocaleDateString('pt-BR') %></p>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title d-flex justify-content-between align-items-center">
                Dados do aluno
                <button class="btn btn-outline-warning btn-sm" type="button"
                        onclick="toggleForm('form-alterar-dados')">
                    <i class="bi bi-pencil"></i> Atualizar dados
                </button>
            </h5>
        </div>
    
        <div id="form-alterar-dados" class="card-body d-none">
            <form action="/usuario/aluno/dados?_method=PUT" method="POST">
                <div class="mb-3">
                    <label for="peso_atual" class="form-label">Peso atual (kg)</label>
                    <input
                        type="number"
                        step="0.01"
                        name="peso_atual"
                        id="peso_atual"
                        class="form-control"
                        required
                    >
                </div>
    
                <div class="mb-3">
                    <label for="altura" class="form-label">Altura (cm)</label>
                    <input
                        type="number"
                        step="0.01"
                        name="altura"
                        id="altura"
                        class="form-control"
                        required
                    >
                </div>
    
                <div class="mb-3">
                    <label for="objetivo" class="form-label">Objetivo</label>
                    <input
                        type="text"
                        name="objetivo"
                        id="objetivo"
                        class="form-control"
                        required
                    >
                </div>
    
                <div class="mb-3">
                    <label for="restricoes" class="form-label">Restrições</label>
                    <textarea
                        name="restricoes"
                        id="restricoes"
                        rows="3"
                        class="form-control"
                    ></textarea>
                </div>
    
                <div class="mb-3">
                    <label for="id_instrutor" class="form-label">Instrutor</label>
                    <select name="id_instrutor" id="id_instrutor" class="form-select">
                        <option value="">Selecione um instrutor</option>
                        <% instrutores.forEach(i => { %>
                            <option value="<%= i.id_instrutor %>">
                                <%= i.nome %>
                            </option>
                        <% }) %>
                    </select>
                </div>
    
                <div class="mb-3">
                    <button type="submit" class="btn btn-warning w-100">Salvar alterações</button>
                </div>
            </form>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title d-flex justify-content-between align-items-center">
                Segurança
                <button class="btn btn-outline-warning btn-sm" type="button"
                        onclick="toggleForm('form-alterar-senha')">
                    <i class="bi bi-shield-lock"></i> Alterar senha
                </button>
            </h5>

            <form id="form-alterar-senha"
                action="/usuario/conta/senha"
                method="POST"
                class="d-none mt-3">

                <div class="mb-3">
                    <label class="form-label">Nova senha</label>
                    <input type="password" name="senha" class="form-control" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">Confirmar senha</label>
                    <input type="password" name="confirmar_senha" class="form-control" required>
                </div>

                <button type="submit" class="btn btn-warning w-100">
                    Alterar senha
                </button>
            </form>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">Informações</h5>

            <p><strong>Total de treinos realizados:</strong></p>
            <p><strong>Último treino realizado:</strong></p>
        </div>
    </div>

    <div class="d-grid gap-2">
        <a href="/usuario/logout" class="btn btn-outline-danger">
            <i class="bi bi-box-arrow-right"></i> Sair da conta
        </a>
    </div>

</div>

<nav class="bottom-nav py-2">
    <div class="container">
        <div class="row text-center">

            <div class="col">
                <a href="/usuario/inicio">
                    <i class="bi bi-house icon-big"></i><br>
                    Início
                </a>
            </div>

            <div class="col">
                <a href="/usuario/opcoes">
                    <i class="bi bi-grid-3x3-gap icon-big"></i><br>
                    Opções
                </a>
            </div>

            <div class="col">
                <a href="/usuario/estatisticas">
                    <i class="bi bi-arrow-up-right icon-big"></i><br>
                    Estatísticas
                </a>
            </div>

            <div class="col">
                <a href="/usuario/conta" class="active">
                    <i class="bi bi-person icon-big"></i><br>
                    Conta
                </a>
            </div>

        </div>
    </div>
</nav>

<script>
    function toggleForm(id) {
        const form = document.getElementById(id);
        form.classList.toggle('d-none');
    }
</script>

</body>
</html>
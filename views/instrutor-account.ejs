<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conta do Instrutor</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <link rel="stylesheet" href="/stylesheets/aluno.css">
</head>
<body>

<div class="container py-4 mb-5">

    <h3 class="mb-4">
        <i class="bi bi-person-badge"></i> Minha Conta
    </h3>

    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">Dados da Conta</h5>

            <p><strong>Nome:</strong> <%= usuario.nome %></p>
            <p><strong>Usuário:</strong> <%= usuario.user_name %></p>
            <p><strong>E-mail:</strong> <%= usuario.email %></p>
            <p><strong>Tipo de conta:</strong> Instrutor</p>
            <p><strong>Conta criada em:</strong> 
                <%= new Date(usuario.criado_em).toLocaleDateString('pt-BR') %>
            </p>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title d-flex justify-content-between align-items-center">
                Editar Dados
                <button class="btn btn-outline-primary btn-sm" type="button"
                        onclick="toggleForm('form-editar-dados')">
                    <i class="bi bi-pencil"></i> Editar
                </button>
            </h5>

            <form id="form-editar-dados"
                  action="/instrutor/conta/editar"
                  method="POST"
                  class="d-none mt-3">

                <div class="mb-3">
                    <label class="form-label">Nome</label>
                    <input type="text" name="nome" class="form-control"
                           value="<%= usuario.nome %>" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">Nome de usuário</label>
                    <input type="text" name="username" class="form-control"
                           value="<%= usuario.user_name %>" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">E-mail</label>
                    <input type="email" name="email" class="form-control"
                           value="<%= usuario.email %>" required>
                </div>

                <button type="submit" class="btn btn-primary w-100">
                    Salvar alterações
                </button>
            </form>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title d-flex justify-content-between align-items-center">
                Segurança
                <button class="btn btn-outline-warning btn-sm" type="button"
                        onclick="toggleForm('form-alterar-senha')">
                    <i class="bi bi-shield-lock"></i> Alterar senha
                </button>
            </h5>

            <form id="form-alterar-senha"
                  action="/instrutor/conta/senha"
                  method="POST"
                  class="d-none mt-3">

                <div class="mb-3">
                    <label class="form-label">Nova senha</label>
                    <input type="password" name="senha" class="form-control" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">Confirmar senha</label>
                    <input type="password" name="confirmar_senha" class="form-control" required>
                </div>

                <button type="submit" class="btn btn-warning w-100">
                    Alterar senha
                </button>
            </form>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">Informações do Instrutor</h5>
            <p><strong>Total de alunos vinculados:</strong></p>
        </div>
    </div>

    <div class="d-grid gap-2">
        <a href="/instrutor/logout" class="btn btn-outline-danger">
            <i class="bi bi-box-arrow-right"></i> Sair da conta
        </a>
    </div>

</div>

<nav class="bottom-nav py-2">
    <div class="container">
        <div class="row text-center">

            <div class="col">
                <a href="/instrutor/inicio">
                    <i class="bi bi-house icon-big"></i><br>
                    Início
                </a>
            </div>

            <div class="col">
                <a href="/instrutor/opcoes">
                    <i class="bi bi-grid-3x3-gap icon-big"></i><br>
                    Opções
                </a>
            </div>

            <div class="col">
                <a href="/instrutor/alunos">
                    <i class="bi bi-people icon-big"></i><br>
                    Alunos
                </a>
            </div>

            <div class="col">
                <a href="/instrutor/conta" class="active">
                    <i class="bi bi-person icon-big"></i><br>
                    Conta
                </a>
            </div>

        </div>
    </div>
</nav>

<script>
    function toggleForm(id) {
        const form = document.getElementById(id);
        form.classList.toggle('d-none');
    }
</script>

</body>
</html>